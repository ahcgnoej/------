<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>계산기</title>
    <style>
        * {box-sizing: border-box;}
        #result {width:180px; height:50px; margin:5px; text-align: right;}
        #operator {width:50px; height:50px; margin:5px; text-align:center}
        button {width: 50px; height:50px; margin:5px;}
    </style>
</head>
<body>

    <input readonly id="operator">
    <input readonly id="result" type="number">
    <div><button id="num7">7</button><button id="num8">8</button><button id="num9">9</button><button id="plus">+</button></div>
    <div><button id="num4">4</button><button id="num5">5</button><button id="num6">6</button><button id="minus">-</button></div>
    <div><button id="num1">1</button><button id="num2">2</button><button id="num3">3</button><button id="divide">/</button></div>
    <div><button id="clear">c</button><button id="num0">0</button><button id="calculate">=</button><button id="multiply">x</button></div>
    
    <script>
        let operator=''
        let one=''
        let two=''
        const $operator=document.querySelector('#operator');
        const $result=document.querySelector('#result');
        /*비슷한 함수들이 중복될 때는 다른 부분을 매개변수로 변경하고 하나의 함수로 빼주기
        document.querySelector('#num7').addEventListener('click',()=>{
            if(operator){
                two='7'
            }else{
                one='7'
            }
            $result.value+='7'
        })
        document.querySelector('#num6').addEventListener('click',()=>{
            if(operator){
                two='6'
            }else{
                one='6'
            }
            $result.value+='6'
        })
        .... 이런게 버튼 1까지 필요할 것이다. 근데 숫자 빼고는 다 같은 내용이다.
        이런건 함수로 만들어서 중복을 없애주는 것이 편하다. 그 내용은 아래와 같다. 
        */
        const onClickButton=(e)=>{
            return()=> {
                if(operator){
                    two+=number
                }else{
                    one+=number
                }
            $result.value+=number
            }
        }
        document.querySelector('#num0').addEventListener('click',onClickButton('0'))
        document.querySelector('#num1').addEventListener('click',onClickButton('1'))
        document.querySelector('#num2').addEventListener('click',onClickButton('2'))
        document.querySelector('#num3').addEventListener('click',onClickButton('3'))
        document.querySelector('#num4').addEventListener('click',onClickButton('4'))
        document.querySelector('#num5').addEventListener('click',onClickButton('5'))
        document.querySelector('#num6').addEventListener('click',onClickButton('6'))
        document.querySelector('#num7').addEventListener('click',onClickButton('7'))
        document.querySelector('#num8').addEventListener('click',onClickButton('8'))
        document.querySelector('#num9').addEventListener('click',onClickButton('9'))
        document.querySelector('#plus').addEventListener('click',()=>{})
        document.querySelector('#clear').addEventListener('click',()=>{})
        document.querySelector('#minus').addEventListener('click',()=>{})
        document.querySelector('#divide').addEventListener('click',()=>{})
        document.querySelector('#multiple').addEventListener('click',()=>{})

        /*
        이렇게 onClickButton이라는 함수를 만들어주니 좀 더 코드가 간결해졌다. 
        const onClickButton=(number)=>{
            return()=> {
                if(operator){
                    two+=number
                }else{
                    one+=number
                }
            $result.value+=number
            }
        }
        이부분을 처음에는 아래처럼 생각할 수 있을 것이다. 
        const onClickButton=(number)=>{
            if(operator){
                two+=number
            }else{
                one+=number
            }
            $result.value+=number
        } 
        그러나 이벤트리스너 두번째 인자에는 함수자리가 들어가야한다
        return값이 undefined이기 때문에 오류가 날 것이다. 
        그래서 저기에 ()를 사용해 매개변수를 전달해주려면 애초에 함수가 리턴되어야 한다
        그럼 return () => {} 이런식으로 함수를 리턴해주면 어떻게 될까? 리턴 형이 함수는 맞지만 값이 안 들어 있을 것이다
        const onClickButton=(number)=>{
            return()=> {
                if(operator){
                    two+=number
                }else{
                    one+=number
                }
            $result.value+=number
            }
        } 그래서 이렇게 return 안에 함수내용을 넣어준 것이고 
        중괄호와 리턴이 붙으면 "{ return" 부분을 생략 가능하다 그럼 아래와같이 함수가 연달아 나오는 모양일 것이고
        이건 함수 안에 함수가 있다, 함수가 함수를 리턴한다 이런 식으로 생각할 수 있다.  
        그리고 이를 고차함수라고 한다. 
        const onClickButton=(number) => () => {
                if(operator){
                    two+=number
                }else{
                    one+=number
                }
            $result.value+=number
            }
        }
        */
        /*
        고차함수 안 쓰고 이벤트로 가능
        const onClickButton=(e)=>{
                if(operator){
                    two+=e.target.textContent;
                }else{
                    one+=e.target.textContent
                }
            $result.value+=e.target.textContent
        }
        document.querySelector('#num0').addEventListener('click',onClickButton)
        document.querySelector('#num1').addEventListener('click',onClickButton)
        document.querySelector('#num2').addEventListener('click',onClickButton)
        document.querySelector('#num3').addEventListener('click',onClickButton)
        
        */
    </script>
</body>
</html>